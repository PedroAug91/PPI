<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da forca</title>
</head>
<body onload="startGame()">
    <input type="text" id="user-guess" maxlength="1">
    <button id="btn-guess" onclick="testGuess()">Adivinhar</button>
    <button id="btn-restart" onclick="startGame()">Reiniciar jogo</button>
    <h1>Número de tentativas restantes: <span id="numTries">6</span></h1>
    <p id="guessed-letters"></p>
    <p id="solution"></p>
</body>
</html>
<script>
    const words = ["software", "javascript", "python", "pedras", "computador"];
    const solution = document.getElementById("solution");
    let numTries = 6;
    let word;
    let currentGuess;
    let guessedLetters = [];
    let guessIsCorrect

    function startGame() {
        const index = Math.floor(Math.random()  * words.length);
        word = words[index];
        currentGuess = Array(word.length).fill('_');
        solution.innerText = "_".repeat(word.length);
        numTries = 6;
        document.getElementById("numTries").innerText = numTries;
        document.getElementById("guessed-letters").innerText = " ";
    }

    function checkNumTries() {
        if (numTries === 0) {
            alert("Suas tentativas acabaram :(...\nA palavra certa era: " + word);
            startGame();
            return false;
        }
    }

    function testGuess() {
        let userLetter = document.getElementById("user-guess").value.toLowerCase();
        guessIsCorrect = false;
        
        for (let i = 0; i < guessedLetters.length; i++) {
            if (userLetter == guessedLetters[i]) {
            alert("Essa letra já foi utilizada. Tente outra :)");
            return null;
            }
        }

        guessedLetters.push(userLetter);
        document.getElementById("guessed-letters").innerText = guessedLetters.join(" ");

        for (let i = 0; i < word.length; i++) {
            if (userLetter === word[i] && currentGuess[i] === "_") { 
                currentGuess[i] = userLetter;
                guessIsCorrect = true;
            }
        }

        solution.innerText = currentGuess.join("");

        if(!guessIsCorrect) {
            numTries--;
            document.getElementById("numTries").innerText = numTries;
        }

        checkNumTries();
    }

</script>